
# sed命令

## 用法： sed [option]... 'script' inputfile...

## 常用选项：

```
-r 使用扩展正则表达式
-n 不输出模式空间内容到屏幕，即不自动打印
-e 多点编辑，执行逻辑是每个-e内的操作指令都会逐行对全文执行一次操作
-f /PATH/SCRIPT_FILE: 从指定文件中读取编辑脚本
-r 支持使用扩展正则表达式
-i 原处编辑
```

`-e`的执行逻辑是每个-e内的操作指令都会逐行对全文执行一次操作，一般前几个-e命令内放对内容更改的命令，最后一个或多个是显示内容使用的

# script '地址命令'

# 地址定界

(1) 不给地址：对全文进行处理

(2) 单地址：

```
#: 指定的行
/pattern/：被此处模式所能够匹配到的每一行
```

(3) 地址范围：

```
#,# 第#行到第#行
#,+# 第#行到到#+#行
/pat1/,/pat2/ 第一次匹配到pat1到pat1之后第一次匹配到pat2，这里支持正则表达式
#,/pat1/ 混合使用
```

(4) 步进

```
1~2 奇数行
2~2 偶数行
```

# 编辑命令

```
d 删除模式空间匹配的行
p 显示模式空间中的内容
a [\]text：在指定行后面追加文本 支持使用\n实现多行追加
i [\]text：在行前面插入文本
c [\]text：替换行为单行或多行文本
w /path/somefile: 保存模式匹配的行至指定文件
r /path/somefile：读取指定文件的文本至模式空间中匹配到的行后
=: 为模式空间中的行打印行号
!:模式空间中匹配行取反处理
```

# 替换
s///：查找替换,支持使用其它分隔符，s@@@，s###

替换标记

```
g 行内全局替换
p 显示替换成功的行
w /PATH/TO/SOMEFILE：将替换成功的行保存至文件
```

# 示例

sed -e ‘s/dog/cat/’ -e ‘s/hi/lo/’ pets

sed –i.bak  ‘s/dog/cat/g’ pet

# 高级编辑命令

```
h 把模式空间中的内容覆盖至保持空间中
H 把模式空间中的内容追加至保持空间中
g 从保持空间取出数据覆盖至模式空间
G 从保持空间取出内容追加至模式空间
x 把模式空间中的内容与保持空间中的内容进行互换
n 读取匹配到的行的下一行覆盖至模式空间
N 读取匹配到的行的下一行追加至模式空间
d 删除模式空间中的行
D 删除当前模式空间开端至\n的内容（不再传至标准输 出），放弃之后的命令，但是对剩余模式空间重新执行sed
```

# 示例

sed -n 'n;p' FILE

sed '1!G;h;$!d' FILE

sed '$!N;$!D' FILE

sed '$!d' FILE

sed ‘G’ FILE

sed ‘g’ FILE

sed ‘/^$/d;G’ FILE

sed 'n;d' FILE

sed -n '1!G;h;$p' FILE
